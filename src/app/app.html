<main class="page">
  <section class="hero">
    <div>
      <p class="badge">üßë –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤ - {{ config.currentFollowers }}</p>
      <p class="badge ml-1">
        üì¶ –í—ñ–¥–∫—Ä–∏—Ç–æ —Ä—ñ–≤–Ω—ñ–≤ - {{ unlockedCount }} / {{ config.targets.length }}
      </p>
      <!-- <button class="add-level" type="button" (click)="addLevel()">–î–æ–¥–∞—Ç–∏ —Ä—ñ–≤–µ–Ω—å</button> -->
      <h1>
        <img src="/n8n-icon.webp" alt="n8n-logo" />
        <span class="title-badge">12</span> –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ–π –∑–∞ –ø—ñ–¥–ø–∏—Å–∫—É
      </h1>
      <p class="subtitle">
        –í—ñ–¥–∫—Ä–∏–≤–∞–π —Ä—ñ–≤–Ω—ñ –ø–æ—Å—Ç—É–ø–æ–≤–æ. 1 –∫–ª—ñ—Ç–∏–Ω–∫–∞ = {{ cellSizeFollowers }} –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤.
      </p>
    </div>
  </section>

  <section class="grid">
    @for (block of blocks; let i = $index; track block.title) {
      @if (isUnlocked(config.targets[i], i)) {
        <article class="card unlocked">
          <div class="card-head">
            <div>
              <p class="level">Level {{ i + 1 }}</p>
              <h2>{{ block.title }}</h2>
            </div>
            <div class="head-actions">
              <span class="status ok">‚úÖ</span>
            </div>
          </div>
          <p class="desc">{{ block.description }}</p>
          <p class="meta">
            –¶—ñ–ª—å: <strong>{{ config.targets[i] }}</strong> –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤
          </p>
          <button class="download" type="button">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ .json</button>
        </article>
      } @else {
        <article class="card locked">
          <div class="card-inner">
            <div class="card-head">
              <div>
                <p class="level">Level {{ i + 1 }}</p>
                <h2>{{ block.title }}</h2>
              </div>
              <div class="head-actions">
                <span class="status lock">üîí</span>
              </div>
            </div>
            <p class="desc desktop-only">{{ block.description }}</p>
            <p class="meta">
              –¶—ñ–ª—å: <strong>{{ config.targets[i] }}</strong> –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤
            </p>
            <button class="download locked" type="button" disabled>
              Locked ¬∑ –¥–æ—Å—Ç—É–ø–Ω–æ –ø—ñ—Å–ª—è {{ config.targets[i] }}
            </button>
          </div>
          @if (!isUnlocked(config.targets[i], i) && nextUnlockIndex === i) {
            <div class="progress-title">–ü—Ä–æ–≥—Ä–µ—Å —Ä—ñ–≤–Ω—è</div>
            <div
              class="progress-blocks"
              [style.gridTemplateColumns]="'repeat(' + getGridCols(i) + ', 1fr)'"
              [style.gridTemplateRows]="'repeat(' + getGridRows(i) + ', 1fr)'"
            >
              @for (cell of getMaxProgressBlocks(i); let j = $index; track j) {
                <div
                  class="progress-block"
                  [class.progress-block--locked]="!isCellUnlocked(i, j)"
                  [class.progress-block--current]="isCellCurrent(i, j)"
                ></div>
              }
            </div>
          }
        </article>
      }
    }
  </section>

  <section class="cta">
    <div class="cta-locked">
      <p>–î—ñ–π–¥–∏ –¥–æ Level 12 —ñ –æ—Ç—Ä–∏–º–∞–π –≤—Å—ñ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –æ–¥–Ω–∏–º –ø–∞–∫–µ—Ç–æ–º.</p>
      <button class="cta-button ghost" type="button">üéÅ –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó</button>
      <p class="cta-progress">
        üì¶ –ó–∞—Ä–∞–∑ –≤—ñ–¥–∫—Ä–∏—Ç–æ: {{ unlockedCount }} / {{ config.targets.length }}
      </p>
    </div>
  </section>
</main>
